# This file contains configuration for each of the repositories related to Firefox CI.
#
# Repositories are also known as projects (mostly within the
# taskgraph-generation code) and as branches (although they are not Mercurial
# branches).
#
# Structure
# ---------
#
# Each project is keyed by its "alias", a short, slash-free name for the project.
#
# The value is an object describing the project with the following keys:
#
# - `repo` -- the https repository URL
# - `repo_type` -- `hg` or `git` so far (for later expansion)
# - `access` -- the name of the group with access to this repository; typically `scm_level_{1,2,3}`.
# - `level` -- the level access to this repository; typically `{1,2,3}`.
# - `trust_domain` -- separation within an access level of projects with different organizations
# - `parent_repo` -- for projects like comm where the repo is checked out within a "parent" repo
# - 'is_try' -- if present and true, this is a "try" repo, meaning that users typically push new heads
#               and expect customized task graphs; other repos follow a more typical model of each new
#               push adding more commits to the previous head.
# - `features` -- features that should be enabled for this project, as an object with boolean
#                 values, defaulting to false
#   - 'is-trunk' -- Branches containing 'landed' code destined for nightly builds. These branches have a shared index
#       that can be referenced by the tip revision on any push.
#   - `taskcluster-cron` -- tasks defined in `.cron.yml` can run for this project (gecko/comm repos only)
#   - `taskcluster-push` -- decision tasks run for pushes to this project's repository
#   - `gecko-roles` -- this repository should have gecko-related roles assigned (for users, actions, cron, etc.)
#   - `mobile-roles` -- this repository should have mobile-related roles assigned (for users, actions, cron, etc.)
#   - `mobile-roles-forks` -- this fork should have some (restricted) mobile roles assigned
#   - `mobile-beetmover-phase` -- this repository should have beetmover related scopes associated
#   - `mobile-sign-phase` -- this repository should have sign related scopes associated
#   - `mobile-pushapk-phase` -- this repository should have pushapk related scopes associated
#   - `gecko-actions` -- this repository should have gecko-related action hooks defined
#   - `trust-domain-scopes` -- this repository should have generic scopes associated to it's trust domain
#   - `treeherder-reporting` -- this repository reports results to treeherder
#   - `taskcluster-push-via-hook` -- (temporary) the 'taskcluster-push' feature should be implemented with hooks
#   - `autophone` -- this repository is allowed to use the Android farm called "Autophone"

---
ash:
  repo: https://hg.mozilla.org/projects/ash
  repo_type: hg
  access: scm_level_2
  trust_domain: gecko
  features:
    gecko-roles: true
    gecko-actions: true
    trust-domain-scopes: true
    treeherder-reporting: true
    taskcluster-cron: false
    taskcluster-push: false
    taskcluster-push-via-hooks: true
mozilla-release:
  repo: https://hg.mozilla.org/releases/mozilla-release
  repo_type: hg
  access: scm_level_3
  trust_domain: gecko
  features:
    gecko-roles: true
    gecko-actions: true
    trust-domain-scopes: true
    treeherder-reporting: true
    taskcluster-cron: true
    taskcluster-push: false
    taskcluster-push-via-hooks: true
mozilla-esr60:
  repo: https://hg.mozilla.org/releases/mozilla-esr60
  repo_type: hg
  access: scm_level_3
  trust_domain: gecko
  features:
    gecko-roles: true
    gecko-actions: true
    trust-domain-scopes: true
    treeherder-reporting: true
    taskcluster-cron: true
    taskcluster-push: false
    taskcluster-push-via-hooks: true
comm-esr60:
  repo: https://hg.mozilla.org/releases/comm-esr60
  repo_type: hg
  access: scm_level_3
  trust_domain: comm
  features:
    gecko-roles: true
    gecko-actions: true
    trust-domain-scopes: true
    treeherder-reporting: true
    taskcluster-cron: false
    taskcluster-push: true
oak:
  repo: https://hg.mozilla.org/projects/oak
  repo_type: hg
  access: scm_level_3
  trust_domain: gecko
  features:
    gecko-roles: true
    gecko-actions: true
    trust-domain-scopes: true
    treeherder-reporting: true
    taskcluster-cron: false
    taskcluster-push: false
    taskcluster-push-via-hooks: true
pine:
  repo: https://hg.mozilla.org/projects/pine
  repo_type: hg
  access: scm_level_2
  trust_domain: gecko
  features:
    gecko-roles: true
    gecko-actions: true
    trust-domain-scopes: true
    treeherder-reporting: true
    taskcluster-cron: true
    taskcluster-push: false
    taskcluster-push-via-hooks: true
mozilla-beta:
  repo: https://hg.mozilla.org/releases/mozilla-beta
  repo_type: hg
  access: scm_level_3
  trust_domain: gecko
  features:
    gecko-roles: true
    gecko-actions: true
    trust-domain-scopes: true
    treeherder-reporting: true
    taskcluster-cron: true
    taskcluster-push: false
    taskcluster-push-via-hooks: true
comm-beta:
  repo: https://hg.mozilla.org/releases/comm-beta
  repo_type: hg
  access: scm_level_3
  trust_domain: comm
  parent_repo: https://hg.mozilla.org/releases/mozilla-beta
  features:
    gecko-roles: true
    gecko-actions: true
    trust-domain-scopes: true
    treeherder-reporting: true
    taskcluster-cron: false
    taskcluster-push: true
mozilla-inbound:
  repo: https://hg.mozilla.org/integration/mozilla-inbound
  repo_type: hg
  access: scm_level_3
  trust_domain: gecko
  features:
    gecko-roles: true
    gecko-actions: true
    trust-domain-scopes: true
    treeherder-reporting: true
    is-trunk: true
    taskcluster-cron: true
    taskcluster-push: false
    taskcluster-push-via-hooks: true
mozilla-central:
  repo: https://hg.mozilla.org/mozilla-central
  repo_type: hg
  access: scm_level_3
  trust_domain: gecko
  features:
    gecko-roles: true
    gecko-actions: true
    trust-domain-scopes: true
    treeherder-reporting: true
    is-trunk: true
    taskcluster-cron: true
    taskcluster-push: false
    taskcluster-push-via-hooks: true
comm-central:
  repo: https://hg.mozilla.org/comm-central
  repo_type: hg
  access: scm_level_3
  trust_domain: comm
  parent_repo: https://hg.mozilla.org/mozilla-central
  features:
    gecko-roles: true
    gecko-actions: true
    trust-domain-scopes: true
    treeherder-reporting: true
    taskcluster-cron: true
    taskcluster-push: false
    taskcluster-push-via-hooks: true
    is-trunk: true
cedar:
  repo: https://hg.mozilla.org/projects/cedar
  repo_type: hg
  access: scm_level_2
  trust_domain: gecko
  features:
    gecko-roles: true
    gecko-actions: true
    trust-domain-scopes: true
    treeherder-reporting: true
    taskcluster-cron: false
    taskcluster-push: false
    taskcluster-push-via-hooks: true
birch:
  repo: https://hg.mozilla.org/projects/birch
  repo_type: hg
  access: scm_level_3
  trust_domain: gecko
  features:
    gecko-roles: true
    gecko-actions: true
    trust-domain-scopes: true
    treeherder-reporting: true
    taskcluster-cron: true
    taskcluster-push: false
    taskcluster-push-via-hooks: true
cypress:
  repo: https://hg.mozilla.org/projects/cypress
  repo_type: hg
  access: scm_level_2
  trust_domain: comm
  features:
    gecko-roles: true
    gecko-actions: true
    trust-domain-scopes: true
    treeherder-reporting: true
    taskcluster-cron: false
    taskcluster-push: false
ux:
  repo: https://hg.mozilla.org/projects/ux
  repo_type: hg
  access: scm_level_3
  trust_domain: gecko
  features:
    gecko-roles: true
    gecko-actions: true
    trust-domain-scopes: true
    treeherder-reporting: true
    taskcluster-cron: false
    taskcluster-push: false
elm:
  repo: https://hg.mozilla.org/projects/elm
  repo_type: hg
  access: scm_level_2
  trust_domain: gecko
  features:
    gecko-roles: true
    gecko-actions: true
    trust-domain-scopes: true
    treeherder-reporting: true
    taskcluster-cron: true
    taskcluster-push: false
    taskcluster-push-via-hooks: true
graphics:
  repo: https://hg.mozilla.org/projects/graphics
  repo_type: hg
  access: scm_level_2
  trust_domain: gecko
  features:
    gecko-roles: true
    gecko-actions: true
    trust-domain-scopes: true
    treeherder-reporting: true
    taskcluster-cron: false
    taskcluster-push: false
try:
  repo: https://hg.mozilla.org/try
  repo_type: hg
  access: scm_level_1
  trust_domain: gecko
  is_try: true
  features:
    gecko-roles: true
    gecko-actions: true
    trust-domain-scopes: true
    treeherder-reporting: true
    taskcluster-cron: false
    taskcluster-push: true
try-comm-central:
  repo: https://hg.mozilla.org/try-comm-central
  repo_type: hg
  access: scm_level_1
  trust_domain: comm
  is_try: true
  features:
    gecko-roles: true
    gecko-actions: true
    trust-domain-scopes: true
    treeherder-reporting: true
    taskcluster-cron: false
    taskcluster-push: true
larch:
  repo: https://hg.mozilla.org/projects/larch
  repo_type: hg
  access: scm_level_2
  trust_domain: gecko
  features:
    gecko-roles: true
    gecko-actions: true
    trust-domain-scopes: true
    treeherder-reporting: true
    taskcluster-cron: false
    taskcluster-push: false
    taskcluster-push-via-hooks: true
maple:
  repo: https://hg.mozilla.org/projects/maple
  repo_type: hg
  access: scm_level_3
  trust_domain: gecko
  features:
    gecko-roles: true
    gecko-actions: true
    trust-domain-scopes: true
    treeherder-reporting: true
    taskcluster-cron: true
    taskcluster-push: false
    taskcluster-push-via-hooks: true
jamun:
  repo: https://hg.mozilla.org/projects/jamun
  repo_type: hg
  access: scm_level_2
  trust_domain: gecko
  features:
    gecko-roles: true
    gecko-actions: true
    trust-domain-scopes: true
    treeherder-reporting: true
    taskcluster-cron: true
    taskcluster-push: false
    taskcluster-push-via-hooks: true
autoland:
  repo: https://hg.mozilla.org/integration/autoland
  repo_type: hg
  access: scm_level_3
  trust_domain: gecko
  features:
    gecko-roles: true
    gecko-actions: true
    trust-domain-scopes: true
    treeherder-reporting: true
    is-trunk: true
    taskcluster-cron: true
    taskcluster-push: false
    taskcluster-push-via-hooks: true
stylo:
  repo: https://hg.mozilla.org/incubator/stylo
  repo_type: hg
  access: scm_level_2
  trust_domain: gecko
  features: {}
stylo-try:
  repo: https://hg.mozilla.org/incubator/stylo-try
  repo_type: hg
  access: scm_level_1
  trust_domain: gecko
  is_try: true
  features: {}

# non-gecko repositories

nss:
  repo: https://hg.mozilla.org/projects/nss
  repo_type: hg
  access: scm_nss
  trust_domain: nss
  features:
    taskcluster-push: true
    treeherder-reporting: true

nss-try:
  repo: https://hg.mozilla.org/projects/nss-try
  repo_type: hg
  access: scm_level_1
  trust_domain: nss
  features:
    taskcluster-push: true
    treeherder-reporting: true

ci-configuration:
  repo: https://hg.mozilla.org/ci/ci-configuration
  repo_type: hg
  access: scm_level_3
  trust_domain: ci
  features:
    taskcluster-push: false
    taskcluster-push-via-hooks: true
    trust-domain-scopes: true
    treeherder-reporting: true

ci-configuration-try:
  repo: https://hg.mozilla.org/ci/ci-configuration-try
  repo_type: hg
  access: scm_level_1
  trust_domain: ci
  features:
    taskcluster-push: false
    taskcluster-push-via-hooks: true
    trust-domain-scopes: true
    treeherder-reporting: true

ci-admin:
  repo: https://hg.mozilla.org/ci/ci-admin
  repo_type: hg
  access: scm_level_3
  trust_domain: ci
  features:
    taskcluster-push: false
    taskcluster-push-via-hooks: true
    trust-domain-scopes: true
    treeherder-reporting: true

ci-admin-try:
  repo: https://hg.mozilla.org/ci/ci-admin-try
  repo_type: hg
  access: scm_level_1
  trust_domain: ci
  features:
    taskcluster-push: false
    taskcluster-push-via-hooks: true
    trust-domain-scopes: true
    treeherder-reporting: true

taskgraph:
  repo: https://hg.mozilla.org/ci/taskgraph
  repo_type: hg
  access: scm_level_3
  trust_domain: taskgraph
  features:
    taskcluster-push: false
    taskcluster-push-via-hooks: true
    trust-domain-scopes: true
    treeherder-reporting: true

taskgraph-try:
  repo: https://hg.mozilla.org/ci/taskgraph-try
  repo_type: hg
  access: scm_level_1
  trust_domain: taskgraph
  features:
    taskcluster-push: false
    taskcluster-push-via-hooks: true
    trust-domain-scopes: true
    treeherder-reporting: true
    is_try: true

version-control-tools:
  repo: https://hg.mozilla.org/hgcustom/version-control-tools
  repo_type: hg
  access: scm_versioncontrol
  features:
    taskcluster-push: false
    taskcluster-push-via-hooks: true

# Bug 1532453: Add user repositories for experimenting with taskgraph and mobile
tomprince-android-components:
  repo: https://hg.mozilla.org/users/mozilla_hocat.ca/android-components
  repo_type: hg
  access: scm_level_1
  trust_domain: garbage
  features:
    taskcluster-push-via-hooks: true
    trust-domain-scopes: true

# Bug 1532453: Add user repositories for experimenting with taskgraph and mobile
tomprince-reference-browser:
  repo: https://hg.mozilla.org/users/mozilla_hocat.ca/reference-browser
  repo_type: hg
  access: scm_level_1
  trust_domain: garbage
  features:
    taskcluster-push-via-hooks: true
    trust-domain-scopes: true

# mobile Github repositories
android-components:
  repo: https://github.com/mozilla-mobile/android-components
  repo_type: git
  level: 3
  features:
    mobile-roles: true
    mobile-beetmover-phase: true

reference-browser:
  repo: https://github.com/mozilla-mobile/reference-browser/
  repo_type: git
  level: 3
  features:
    autophone: true
    mobile-roles: true
    treeherder-reporting: true

fenix:
  repo: https://github.com/mozilla-mobile/fenix/
  repo_type: git
  level: 3
  features:
    mobile-roles: true
    treeherder-reporting: true


# Bug 1533791 - Temporary solution so QA can run their test suites before their patches are merged in master
kglazko-reference-browser:
  repo: https://github.com/kglazko/reference-browser/
  repo_type: git
  level: 1
  features:
    mobile-roles-forks: true

# Bug 1533791 - Temporary solution so QA can run their test suites before their patches are merged in master
rpappalax-reference-browser:
  repo: https://github.com/rpappalax/reference-browser/
  repo_type: git
  level: 1
  features:
    mobile-roles-forks: true

# Bug 1533791 - Temporary solution so QA can run their test suites before their patches are merged in master
rpappalax-android-components:
  repo: https://github.com/rpappalax/android-components
  repo_type: git
  level: 1
  features:
    mobile-roles-forks: true
